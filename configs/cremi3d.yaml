# CREMI3D Configuration
# Neuron and synapse segmentation

defaults:
  - default

experiment_name: cremi3d_instance_seg
project_name: neurons-cremi3d

# Data configuration for CREMI3D
data:
  dataset: cremi3d
  data_root: data/cremi3d
  batch_size: 4
  num_workers: 4
  train_val_split: 0.2
  cache_rate: 0.5
  volumes:
    - A
    - B
  include_clefts: true
  include_mito: false
  patch_size:
    - 32
    - 128
    - 128

# Model configuration
model:
  type: segresnet
  in_channels: 1
  out_channels: 3  # Background, Neuron, Cleft
  spatial_dims: 3
  init_filters: 32
  feature_dim: 64
  emb_dim: 16
  dropout: 0.2
  use_sem_head: true
  use_ins_head: true

# Optimizer
optimizer:
  type: adamw
  lr: 1.0e-4
  weight_decay: 1.0e-5
  scheduler:
    type: cosine
    T_max: 200
    eta_min: 1.0e-7

# Loss configuration
loss:
  semantic_weight: 1.0
  instance_weight: 1.0
  class_weights:
    - 0.1
    - 0.5
    - 0.4
  discriminative:
    delta_var: 0.5
    delta_dist: 1.5
    norm: 2
    A: 1.0
    B: 1.0
    R: 0.001

# Training
training:
  max_epochs: 200
  accelerator: auto
  devices: 1
  precision: 16-mixed
  gradient_clip_val: 1.0
